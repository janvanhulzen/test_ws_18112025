<launch>
  <let name="urdf_path"
       value="$(find-pkg-share my_robot_description)/urdf/skyentific_robot.urdf.xacro"/>

<!-- test 1 add this -->

  <!-- Robot State Publisher -->
  <node pkg="robot_state_publisher" exec="robot_state_publisher" output="screen">
    <param name="robot_description" value="$(command 'xacro $(var urdf_path)')"/>
  </node>


<!-- test 2 add this:-->
  <!-- ros2_control (controller_manager) -->
  <node pkg="controller_manager" exec="ros2_control_node" output="screen">
    <!-- IMPORTANT: give CM the same robot_description -->
    <param name="robot_description" value="$(command 'xacro $(var urdf_path)')"/>
    <!-- controllers config -->
    <param from="$(find-pkg-share my_robot_bringup)/config/skyentific_robot_controllers.yaml"/>
    <param from="$(find-pkg-share my_robot_bringup)/config/qos_overrides.yaml"/>
  </node>


<!-- test 3 add this:-->

  <!-- Spawners -->
  <node pkg="controller_manager" exec="spawner" args="joint_state_broadcaster"/>
  <node pkg="controller_manager" exec="spawner" args="arm_joints_controller"/>
  <node pkg="controller_manager" exec="spawner" args="gripper_controller"/>
  <node pkg="controller_manager" exec="spawner" args="hold_position_controller --inactive"/>

</launch>